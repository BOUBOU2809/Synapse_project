{% extends 'base.html.twig' %}

{% block title %}Récapitulatif{% endblock %}
{% block body %}
    {{ include('psyche/nav.html.twig') }}

    <a href="{{ path('app_step_3') }}">
        <button type="button" class="btn btn-light text-dark mx-5 my-4">
            <i class="fa-solid fa-arrow-left px-3 py-2"></i>
            Retour</button>
    </a>
    <p class="px-5 pt-4 fw-bold text-lg-start">Récapitulatif</p>
    <h1 class="px-5">{{ processName }}</h1>
    <p class="px-5">Veuillez vérifier la véracité de ces informations avant de les enregistrer</p>

    <div class="d-flex flex-row mt-5">
        <div class="mx-5 w-25">
            <h5 class="mb-4 fw-bold">Itération du processus</h5>
            <div class="mb-2">
                <label class="form-label">Libelle</label>
                <input name="{{ iteration.libelle }}" value="{{ iteration.libelle }}" class="form-control" disabled/>
            </div>
            <div class="d-flex flex-row">
                <div class="mb-2 me-3">
                    <label class="form-label">Date de début</label>
                    <input name="{{ iteration.beginningDate | date('Y-m-d')}}"
                           value="{{ iteration.beginningDate | date('Y-m-d')}}"
                           class="form-control" disabled/>
                </div>
                <div class="mb-2 ms-3">
                    <label class="form-label">Date de fin</label>
                    <input name="{{ iteration.endingDate | date('Y-m-d')}}"
                           value="{{ iteration.endingDate | date('Y-m-d')}}"
                           class="form-control" disabled/>
                </div>
            </div>
            <div class="mb-5">
                <label class="form-label">Date de commission</label>
                <input name="{{ iteration.commissionDate| date('Y-m-d')}}"
                       value="{{ iteration.commissionDate | date('Y-m-d')}}"
                       class="form-control" disabled/>
            </div>

            <h5 class="fw-bold">Session séléctionnée</h5>
            <div class="mt-4 mb-2">
                <label class="form-label">Date de Session</label>
                <input name="{{ selectedSession.date | date('Y-m-d')}}"
                       value="{{ selectedSession.date | date('Y-m-d')}}"
                       class="form-control" disabled/>
            </div>
            <div class="mb-2">
                <label class="form-label">Nombre total de candidats</label>
                <input name="{{ selectedSession.candidats |length }}"
                value="{{ selectedSession.candidats |length }}"
                class="form-control" disabled/>
            </div>
            <div class="mb-2">
                <label class="form-label">Motif séléctionné</label>
                    <input name="{{ motif.libelle }}"
                           value="{{ motif.libelle }}"
                           class="form-control" disabled/>
            </div>
        </div>

        <div class="vr"></div>

        <div class="flex-fill mx-5">
            <h5 class="fw-bold">Candidats séléctionnés</h5>
            <form method="POST" action="/recap">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">NID</th>
                        <th scope="col">Nom</th>
                        <th scope="col">Prénom</th>
                        <th scope="col">Sexe</th>
                        <th scope="col">Date de naissance</th>
                        <th scope="col">Lieu de naissance</th>
                    </tr>
                </thead>
                <tbody>
                {% for candidat in selectedSession.candidats %}
                <tr class="pe-auto">
                        <td>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="nid[]"
                                       value="{{ candidat.nid }}">
                            </div>
                        </td>
                        <td>{{ candidat.nid }}</td>
                        <td>{{ candidat.nom }}</td>
                        <td>{{ candidat.prenom }}</td>
                        <td>{{ candidat.genre.libelle }}</td>
                        <td>{{ candidat.date_naissance |date('Y-m-d') }}</td>
                        <td>{{ candidat.lieu_naissance }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <button type="submit" class="btn btn-dark">Soumettre</button>
            </form>
        </div>
    </div>
{% endblock %}